import{c as C,f as q,d as x,j as e,a as h,u as p,g as f,h as E,i as S,k,l as P,n as $,o as D,p as V,q as A,t as M}from"./index-501f51de.js";import{P as t,p as T,u as g,a as v}from"./index-e524d085.js";import{D as F}from"./displayBox-aa46ab61.js";const j=C({reducer:{drmMachine:q}});function N({itemId:s,containerClasses:a,label:i,value:c,setValue:r}){x.useEffect(()=>{c===!0&&(document.getElementById(s).checked=!0)},[]);const o=a.reduce((l,u)=>(h.isAttrKey(u)&&(l+=`${u} `),l),"");return e.jsxs("div",{className:`form-check form-switch ${o}`,children:[e.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:s,onChange:r}),e.jsx("label",{className:"form-check-label",htmlFor:s,children:i})]})}N.propTypes={itemId:t.string.isRequired,containerClasses:t.arrayOf(T.string).isRequired,label:t.string.isRequired,value:t.bool.isRequired,setValue:t.func.isRequired};function I(){const s=g(),a=p(f),i=c=>{const r=c.target;s(E(r.checked))};return e.jsx(N,{itemId:"dm-power-switch",value:a,containerClasses:["power-box"],label:"Power",setValue:i})}function K(){const s=p(S);return e.jsx(F,{displayMsg:s,itemId:"display",itemClass:"display-box"})}function w({disabled:s,inputValue:a,stepValue:i,minValue:c,maxValue:r,inputId:o,inputName:l,label:u,handleChange:m}){return x.useEffect(()=>{const n=document.getElementById(o);!s&&h.isNumber(a)&&(n.value=a)},[]),e.jsxs("div",{className:"vol-box",children:[e.jsx("label",{htmlFor:o,className:"form-label",children:u}),e.jsx("input",{type:"range",className:"form-range",min:h.isNumber(c)?c:0,max:h.isNumber(r)?r:100,step:h.isNumber(i)?i:1,id:o,name:h.isAttrKey(l)?l:o,onChange:m,disabled:s})]})}w.propTypes={disabled:t.bool.isRequired,inputValue:t.number.isRequired,stepValue:t.number,minValue:t.number,maxValue:t.number,inputId:t.string.isRequired,inputName:t.string,label:t.string.isRequired,handleChange:t.func.isRequired};function L(){const s=g(),a=p(f),i=p(k),c=r=>{const o=r.target;s(P(o.value))};return e.jsx(w,{disabled:!a,inputValue:i,inputId:"drum-box-vol",label:`Volume ${i} %`,handleChange:c})}function R({disabled:s,selectedValue:a,options:i,radioName:c,radioId:r,title:o,handleChange:l}){x.useEffect(()=>{if(h.isStr(a)){const m=`${a}-${r}`;document.getElementById(m).checked=!0}},[]);const u=i.map((m,n)=>e.jsxs("div",{className:"pe-2 btn-check-container",children:[e.jsx("input",{type:"radio",className:"btn-check",name:c,id:`${m.value}-${r}`,autoComplete:"off","data-bank":m.value,onChange:l,disabled:!s},n),e.jsx("label",{className:"btn btn-outline-light",htmlFor:`${m.value}-${r}`,children:m.label})]},n));return e.jsxs("div",{className:"btn-check-container",children:[e.jsx("div",{className:"btn-check-header",children:o}),e.jsx("div",{className:"d-flex flex-row btn-check-body",children:u})]})}R.propTypes={disabled:t.bool.isRequired,selectedValue:t.string.isRequired,options:t.array.isRequired,radioName:t.string.isRequired,radioId:t.string.isRequired,title:t.string.isRequired,handleChange:t.func.isRequired};function O(){const s=g(),a=p(f),i=p($),c=p(D),r=o=>{const u=o.target.getAttribute("data-bank");s(V(u))};return e.jsx(R,{disabled:a,selectedValue:i,options:c,radioName:"m8-snd-bank-selector",radioId:"m8-snd-bank",title:"Select a Sound Bank",handleChange:r})}function B({controls:s}){return e.jsx("div",{className:"drum-box-control",children:s})}B.propTypes={controls:t.element.isRequired};function U(){const s=g(),a=p(f),i=p(k),c=p(A);x.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[]);const r=n=>{const d=document.getElementById(`${n}`);h.isElement(d)&&(s(M(d.parentElement.getAttribute("data-display"))),d.volume=h.toFixedFloat(i/100,2),d.play())},o=n=>{const b=n.target.getAttribute("data-shortcut");r(b)},l=n=>{const d=h.isStr(n.key)?n.key.toUpperCase():null;c.filter(y=>{if(y.shortcut===d)return y}).length===1&&r(d)},u=a?"":"disabled",m=c.map((n,d)=>e.jsx("div",{className:"col-4 pad-container",children:e.jsxs("div",{id:n.id,className:`d-flex flex-column justify-content-center drum-pad ${u}`,"data-shortcut":n.shortcut,"data-display":n.display,onClick:a?o:null,children:[e.jsx("audio",{id:n.shortcut,className:"clip",src:a?n.sound:"#"}),n.shortcut]},d)},d));return e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:m})})}function W(){const s=e.jsxs(e.Fragment,{children:[e.jsx(I,{},"powerSelector"),e.jsx(K,{},"displayBox"),e.jsx(L,{},"volumeSelector"),e.jsx(O,{},"bankSelector")]});return e.jsx(v,{store:j,children:e.jsx("section",{id:"drum-container",className:"container-fluid min-vh-100 vw-100 d-flex ",children:e.jsx("div",{id:"drum-machine",className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{id:"drum-header",className:"col-md-12",children:e.jsx("h1",{children:"M8 Drum Machine"})}),e.jsx("div",{id:"drum-pads",className:"col-md-6",children:e.jsx(U,{})}),e.jsx("div",{id:"drum-controls",className:"col-md-6",children:e.jsx(B,{controls:s})})]})})})})}function J(){return e.jsx(v,{store:j,children:e.jsx(W,{})})}export{J as default};
