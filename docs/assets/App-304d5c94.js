import{u as T,r as _,j as s,P as u}from"./index-cd941d88.js";import{c as D,b as R,u as S,a as P,P as L}from"./redux-toolkit.esm-d5544f70.js";import{B as M}from"./btRange-9e1b4ea2.js";const c=Object.freeze({SESSION:Symbol("session"),BREAK:Symbol("break")}),h=Object.freeze({START:Symbol("start"),STOP:Symbol("stop"),PAUSE:Symbol("pause")}),k=e=>T.isNumber(e)&&e>0&&e<=60?e:e>60?60:1,I=(e,t)=>{if(t.toString()===e.timerRun.toString()){switch(t){case c.SESSION:e.timerValue=e.sessionTime*60;break;case c.BREAK:e.timerValue=e.breakTime*60;break}e.timerMax=e.timerValue}},C=e=>{switch(e.timerRun){case c.SESSION.toString():e.timerRun=c.BREAK.toString(),e.timerValue=e.breakTime*60;break;case c.BREAK.toString():e.timerRun=c.SESSION.toString(),e.timerValue=e.sessionTime*60;break;default:e.timerRun=c.SESSION.toString(),e.timerValue=e.sessionTime*60;break}e.timerMax=e.timerValue},b={breakTime:5,sessionTime:25,timerRun:c.SESSION.toString(),timerValue:25*60,timerMax:25*60,timerStatus:h.STOP.toString(),isStarted:!1,timerId:null},O=D({name:"clock25_5",initialState:b,reducers:{clearTimer(e){e.breakTime=b.breakTime,e.sessionTime=b.sessionTime,e.timerRun=b.timerRun,e.timerValue=b.timerValue,e.timerMax=b.timerMax,e.timerStatus=b.timerStatus,e.isStarted=b.isStarted},setBreakTime(e,t){e.breakTime=k(t.payload),I(e,c.BREAK)},setToBreakTime(e,t){const r=parseInt(e.breakTime);switch(t.payload){case"up":e.breakTime=k(r+1);break;case"down":e.breakTime=k(r-1);break}I(e,c.BREAK)},setSessionTime(e,t){e.sessionTime=k(t.payload),I(e,c.SESSION)},setToSessionTime(e,t){const r=parseInt(e.sessionTime);switch(t.payload){case"up":e.sessionTime=k(r+1);break;case"down":e.sessionTime=k(r-1);break}I(e,c.SESSION)},setTimerValue(e){parseInt(e.timerValue)>0?e.timerValue=e.timerValue-1:C(e)},startTimerId(e,t){e.timerId=t.payload},startTimer(e){e.timerStatus=h.START.toString(),e.isStarted=!0},pauseTimer(e){e.timerStatus=h.PAUSE.toString(),e.isStarted=!1},setTimerRun(e){C(e)}}}),{clearTimer:q,setBreakTime:$,setToBreakTime:K,setSessionTime:U,setToSessionTime:z,setTimerValue:F,startTimer:H,pauseTimer:G,startTimerId:J,setTimerRun:Se}=O.actions,Q=e=>e.clock25_5.breakTime,W=e=>e.clock25_5.sessionTime,X=e=>e.clock25_5.timerRun,Y=e=>e.clock25_5.timerValue,Z=e=>e.clock25_5.timerMax,v=e=>e.clock25_5.timerStatus,ee=e=>e.clock25_5.isStarted,te=e=>e.clock25_5.timerId,se=O.reducer;function ie({timerValueChange:e,timerLabelChange:t}){const r=R(),a=S(X),o=S(Y),l=S(Z),n=S(v),m=S(te);_.useEffect(()=>(f(),()=>{clearInterval(m)}),[n]);const j=()=>{const i=document.getElementById("beep");T.isElement(i)&&i.play()},f=()=>{switch(n){case h.START.toString():const i=setInterval(()=>{r(F())},1e3);r(J(i));break;case h.PAUSE.toString():clearInterval(m);break;case h.STOP.toString():clearInterval(m);break}},p=i=>i>=0&&i<10?`0${i}`:`${i}`,V=i=>{T.isFunction(e)&&e(i)},w=i=>{i===0&&j(),V({timerValue:i});const d=p(Math.floor(i/60)),E=p(i-d*60);return`${d}:${E}`};let g=i=>{switch(i){case c.SESSION.toString():return"bg-session-clock";case c.BREAK.toString():return"bg-break-clock"}};const y=i=>{switch(i){case c.SESSION.toString():return"Session";case c.BREAK.toString():return"Break"}},x={"--clock-current-deg":`${((i,d)=>{const E=Math.ceil(i*100/d);return Math.ceil(360-E*360/100)})(o,l)}deg`};return s.jsxs("div",{className:`timer-display ${g(a)}`,style:x,children:[s.jsx("div",{id:"timer-label",className:"timer-label",children:y(a)}),s.jsx("div",{id:"time-left",className:"time-left",children:w(o)})]})}const re=P({reducer:{clock25_5:se}});function B({label:e,inputId:t,labelId:r,btnUpId:a,btnDownId:o,inputValue:l,handleRangeChange:n,handleBtChange:m,defaultValue:j=50,minValue:f=0,maxValue:p=100,stepValue:V=1}){const g=((x,i)=>{let d=T.isNumber(x)?parseInt(x):parseInt(i);return d>p?d=p:d<f&&(d=f),d})(l,j),y=g>=p,A=g<=f;return s.jsxs("div",{className:"timer-selector",children:[s.jsx("div",{className:"tSel-label",children:s.jsx("label",{id:r,htmlFor:t,children:e})}),s.jsxs("div",{className:"input-group",children:[s.jsx("button",{id:a,className:"btn btn-outline-secondary",type:"button","data-action":"up",onClick:m,disabled:y,children:s.jsx("i",{className:"fas fa-arrow-up"})}),s.jsx("div",{id:t,className:"tSel-value","data-value":""+g,children:""+g}),s.jsx("button",{id:o,className:"btn btn-outline-secondary",type:"button","data-action":"down",onClick:m,disabled:A,children:s.jsx("i",{className:"fas fa-arrow-down"})})]}),s.jsx(M,{onlyInput:!0,disabled:!1,inputId:`${t}-range`,inputValue:g,minValue:f,maxValue:p,stepValue:V,handleChange:n})]})}B.propTypes={label:u.string.isRequired,inputId:u.string.isRequired,labelId:u.string.isRequired,btnUpId:u.string.isRequired,btnDownId:u.string.isRequired,inputValue:u.number.isRequired,defaultValue:u.number.isRequired,handleRangeChange:u.func.isRequired,handleBtChange:u.func.isRequired,minValue:u.number,maxValue:u.number,stepValue:u.number};class N{static isNotStarted(t){return t!==h.START.toString()}static setDisplay(t,r){const a=document.getElementById(t);T.isElement(a)&&(a.innerText=r)}static setToDisplay(t,r){const a=document.getElementById(t);if(T.isElement(a)){const o=parseInt(a.innerText);if(o>=0)switch(r.payload){case"up":a.innerText=""+(o+1);break;case"down":a.innerText=""+(o-1);break}}}}function ne(){const e=R(),t=S(v),r=S(Q),a=l=>{if(N.isNotStarted(t)){const m=l.target.getAttribute("data-action");e(K(m))}},o=l=>{if(N.isNotStarted(t)){const n=parseInt(l.target.value);e($(n))}};return s.jsx("div",{className:"break-selector",children:s.jsx(B,{label:"Break Length",labelId:"break-label",inputId:"break-length",btnDownId:"break-decrement",btnUpId:"break-increment",defaultValue:5,inputValue:r,minValue:0,maxValue:60,stepValue:1,handleBtChange:a,handleRangeChange:o})})}function ae(){const e=R(),t=S(v),r=S(W),a=l=>{if(N.isNotStarted(t)){const m=l.target.getAttribute("data-action");e(z(m))}},o=l=>{if(N.isNotStarted(t)){const n=parseInt(l.target.value);e(U(n))}};return s.jsx("div",{className:"session-selector",children:s.jsx(B,{label:"Session Length",labelId:"session-label",inputId:"session-length",btnDownId:"session-decrement",btnUpId:"session-increment",defaultValue:25,inputValue:parseInt(r),minValue:0,maxValue:60,stepValue:1,handleBtChange:a,handleRangeChange:o})})}function ce(){const e=R(),t=S(ee),r=()=>{const n=document.querySelector(".timer-control button.active");T.isElement(n)&&n.classList.remove("active")},a=n=>{const m=n.target;t===!0?(e(G()),m.classList.remove("active")):(e(H()),m.classList.add("active"))},o=()=>{const n=document.getElementById("beep");T.isElement(n)&&(n.pause(),n.currentTime=0)},l=()=>{r(),o(),e(q())};return s.jsx("div",{className:"timer-control",children:s.jsxs("div",{className:"btn-group btn-group-lg",role:"group","aria-label":"Basic example",children:[s.jsx("button",{id:"start_stop",type:"button",className:"btn btn-default",onClick:a,children:t===!0?s.jsx("i",{className:"fas fa-pause"}):s.jsx("i",{className:"fas fa-play"})}),s.jsx("button",{id:"reset",type:"button",className:"btn btn-default",onClick:l,children:s.jsx("i",{className:"fas fa-sync"})})]})})}const oe=""+new URL("BeepSound-44aadca7.wav",import.meta.url).href;function be(){const e=(t,r)=>{console.log(`display has changed: -- action : ${t} -- value : ${r}`)};return s.jsx(L,{store:re,children:s.jsxs("section",{id:"clock-container",className:"container-fluid",children:[s.jsxs("div",{className:"clock-selector",children:[s.jsx(ne,{}),s.jsx(ae,{})]}),s.jsxs("div",{className:"clock-body",children:[s.jsx(ie,{timerValueChange:e}),s.jsx(ce,{})]}),s.jsx("div",{className:"clock-footer"}),s.jsx("audio",{id:"beep",preload:"auto",src:oe})]})})}export{be as default};
