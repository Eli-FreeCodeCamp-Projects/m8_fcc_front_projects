import{u as i,P as r,p as N,r as y,j as a}from"./index-c9ea79f9.js";import{c as E,a as P,b,u as h,P as v}from"./redux-toolkit.esm-306fc0aa.js";import{D as R}from"./displayBox-b68532d3.js";const k=[{name:"bank1",display:"Heater kit",drum_pads:[{id:"Heater-1",shortcut:"Q",key_code:0,display:"Heater 1",sound:"/sounds/bank1/Heater-1.mp3"},{id:"Heater-2",shortcut:"W",key_code:0,display:"Heater 2",sound:"/sounds/bank1/Heater-2.mp3"},{id:"Heater-3",shortcut:"E",key_code:0,display:"Heater 3",sound:"/sounds/bank1/Heater-3.mp3"},{id:"Heater-4",shortcut:"A",key_code:0,display:"Heater 4",sound:"/sounds/bank1/Heater-4_1.mp3"},{id:"Clap",shortcut:"S",key_code:0,display:"Clap",sound:"/sounds/bank1/Heater-6.mp3"},{id:"Open-HH",shortcut:"D",key_code:0,display:"Open HH",sound:"/sounds/bank1/Dsc_Oh.mp3"},{id:"Kick-n-Hat",shortcut:"Z",key_code:0,display:"Kick n'Hat",sound:"/sounds/bank1/Kick_n_Hat.mp3"},{id:"Kick",shortcut:"X",key_code:0,display:"Kick",sound:"/sounds/bank1/RP4_KICK_1.mp3"},{id:"Closed-HH",shortcut:"C",key_code:0,display:"Closed HH",sound:"/sounds/bank1/Cev_H2.mp3"}]},{name:"bank2",display:"Smooth Piano Kit",drum_pads:[{id:"Chord_1",shortcut:"Q",key_code:0,display:"Chord 1",sound:"https://s3.amazonaws.com/freecodecamp/drums/Chord_1.mp3"},{id:"Chord_2",shortcut:"W",key_code:0,display:"Chord 2",sound:"https://s3.amazonaws.com/freecodecamp/drums/Chord_2.mp3"},{id:"Chord-3",shortcut:"E",key_code:0,display:"Chord 3",sound:"https://s3.amazonaws.com/freecodecamp/drums/Chord_3.mp3"},{id:"Shaker",shortcut:"A",key_code:0,display:"Shaker",sound:"https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3"},{id:"Open-HH",shortcut:"S",key_code:0,display:"Open HH",sound:"https://s3.amazonaws.com/freecodecamp/drums/Dry_Ohh.mp3"},{id:"Closed-HH",shortcut:"D",key_code:0,display:"Closed HH",sound:"https://s3.amazonaws.com/freecodecamp/drums/Bld_H1.mp3"},{id:"Punchy-Kick",shortcut:"Z",key_code:0,display:"Punchy Kick",sound:"https://s3.amazonaws.com/freecodecamp/drums/punchy_kick_1.mp3"},{id:"Side-Stick",shortcut:"X",key_code:0,display:"Side Kick",sound:"https://s3.amazonaws.com/freecodecamp/drums/side_stick_1.mp3"},{id:"Snare",shortcut:"C",key_code:0,display:"Snake",sound:"https://s3.amazonaws.com/freecodecamp/drums/Brk_Snr.mp3"}]}],M=()=>{if(i.isArray(k)){let e="",s=[];const t=k.reduce((d,n,c)=>{if(i.isStr(n.name))return d.push({value:n.name,label:c+1}),s=n.drum_pads,e===""&&(e=n.name),d},[]);return{power:!0,displayMsg:"",volume:50,bank:e,availableBanks:t,bankPads:s}}else throw new Error("Redux Error : Unable to loadSoundBanks, invalid sound banks data. Must be an Array of Objects.")},w=E({name:"mdPreviewer",initialState:M(),reducers:{setSoundBank:{reducer(e,s){e.bank=s.payload.bank,e.displayMsg=s.payload.display,e.bankPads=s.payload.bankPads},prepare(e){if(i.isArray(k)){let s=k.filter(t=>{if(e===t.name)return t});if(s.length===1){if(s=s[0],!i.isStr(s.display)||s.display==="")throw new Error(`Redux Error : Unable to setSoundBank, invalid sound banks data. banksData.display must be a string and not null. ${s.display}`);if(!i.isArray(s.drum_pads)||s.drum_pads.length===0)throw new Error("Redux Error : Unable to setSoundBank, invalid sound banks data. banksData.bankPads must be an Array and not null.");const t=s.display,d=s.drum_pads;return{payload:{bank:e,display:t,bankPads:d}}}else throw new Error("Redux Error : Unable to setSoundBank, invalid sound banks data. banksData.name must be unique and not null.")}else throw new Error("Redux Error : Unable to setSoundBank, invalid sound banks data. Must be an Array of Objects.")}},setPower(e,s){const t=s.payload===!0;e.power=t,e.displayMsg=t===!0?"Welcome to Drum Machine!!!":"Good bye!!!"},setVolume(e,s){const t=i.isNumber(s.payload)?parseInt(s.payload):25;e.volume=t,e.displayMsg=`Volume set to ${t}%`},setDisplay(e,s){e.displayMsg=i.isStr(s.payload)?s.payload:"Bad Message"}}}),{setSoundBank:D,setPower:q,setVolume:A,setDisplay:K}=w.actions,f=e=>e.drmMachine.power,$=e=>e.drmMachine.displayMsg,_=e=>e.drmMachine.volume,V=e=>e.drmMachine.bank,z=e=>e.drmMachine.availableBanks,O=e=>e.drmMachine.bankPads,I=w.reducer,S=P({reducer:{drmMachine:I}});function C({itemId:e,containerClasses:s,label:t,value:d,setValue:n}){y.useEffect(()=>{d===!0&&(document.getElementById(e).checked=!0)},[]);const c=s.reduce((l,m)=>(i.isAttrKey(m)&&(l+=`${m} `),l),"");return a.jsxs("div",{className:`form-check form-switch ${c}`,children:[a.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:e,onChange:n}),a.jsx("label",{className:"form-check-label",htmlFor:e,children:t})]})}C.propTypes={itemId:r.string.isRequired,containerClasses:r.arrayOf(N.string).isRequired,label:r.string.isRequired,value:r.bool.isRequired,setValue:r.func.isRequired};function T(){const e=b(),s=h(f),t=d=>{const n=d.target;e(q(n.checked))};return a.jsx(C,{itemId:"dm-power-switch",value:s,containerClasses:["power-box"],label:"Power",setValue:t})}function F(){const e=h($);return a.jsx(R,{displayMsg:e,itemId:"display",itemClass:"display-box"})}function H({disabled:e,inputValue:s,stepValue:t,minValue:d,maxValue:n,inputId:c,inputName:l,label:m,handleChange:p}){return y.useEffect(()=>{const o=document.getElementById(c);!e&&i.isNumber(s)&&(o.value=s)},[]),a.jsxs("div",{className:"vol-box",children:[a.jsx("label",{htmlFor:c,className:"form-label",children:m}),a.jsx("input",{type:"range",className:"form-range",min:i.isNumber(d)?d:0,max:i.isNumber(n)?n:100,step:i.isNumber(t)?t:1,id:c,name:i.isAttrKey(l)?l:c,onChange:p,disabled:e})]})}H.propTypes={disabled:r.bool.isRequired,inputValue:r.number.isRequired,stepValue:r.number,minValue:r.number,maxValue:r.number,inputId:r.string.isRequired,inputName:r.string,label:r.string.isRequired,handleChange:r.func.isRequired};function U(){const e=b(),s=h(f),t=h(_),d=n=>{const c=n.target;e(A(c.value))};return a.jsx(H,{disabled:!s,inputValue:t,inputId:"drum-box-vol",label:`Volume ${t} %`,handleChange:d})}function B({disabled:e,selectedValue:s,options:t,radioName:d,radioId:n,title:c,handleChange:l}){y.useEffect(()=>{if(i.isStr(s)){const p=`${s}-${n}`;document.getElementById(p).checked=!0}},[]);const m=t.map((p,o)=>a.jsxs("div",{className:"pe-2 btn-check-container",children:[a.jsx("input",{type:"radio",className:"btn-check",name:d,id:`${p.value}-${n}`,autoComplete:"off","data-bank":p.value,onChange:l,disabled:!e},o),a.jsx("label",{className:"btn btn-outline-light",htmlFor:`${p.value}-${n}`,children:p.label})]},o));return a.jsxs("div",{className:"btn-check-container",children:[a.jsx("div",{className:"btn-check-header",children:c}),a.jsx("div",{className:"d-flex flex-row btn-check-body",children:m})]})}B.propTypes={disabled:r.bool.isRequired,selectedValue:r.string.isRequired,options:r.array.isRequired,radioName:r.string.isRequired,radioId:r.string.isRequired,title:r.string.isRequired,handleChange:r.func.isRequired};function W(){const e=b(),s=h(f),t=h(V),d=h(z),n=c=>{const m=c.target.getAttribute("data-bank");e(D(m))};return a.jsx(B,{disabled:s,selectedValue:t,options:d,radioName:"m8-snd-bank-selector",radioId:"m8-snd-bank",title:"Select a Sound Bank",handleChange:n})}function j({controls:e}){return a.jsx("div",{className:"drum-box-control",children:e})}j.propTypes={controls:r.element.isRequired};function G(){const e=b(),s=h(f),t=h(_),d=h(O);y.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[]);const n=o=>{const u=document.getElementById(`${o}`);i.isElement(u)&&(e(K(u.parentElement.getAttribute("data-display"))),u.volume=i.toFixedFloat(t/100,2),u.play())},c=o=>{const x=o.target.getAttribute("data-shortcut");n(x)},l=o=>{const u=i.isStr(o.key)?o.key.toUpperCase():null;d.filter(g=>{if(g.shortcut===u)return g}).length===1&&n(u)},m=s?"":"disabled",p=d.map((o,u)=>a.jsx("div",{className:"col-4 pad-container",children:a.jsxs("div",{id:o.id,className:`d-flex flex-column justify-content-center drum-pad ${m}`,"data-shortcut":o.shortcut,"data-display":o.display,onClick:s?c:null,children:[a.jsx("audio",{id:o.shortcut,className:"clip",src:s?o.sound:"#"}),o.shortcut]},u)},u));return a.jsx("div",{className:"container-fluid",children:a.jsx("div",{className:"row",children:p})})}function L(){const e=a.jsxs(a.Fragment,{children:[a.jsx(T,{},"powerSelector"),a.jsx(F,{},"displayBox"),a.jsx(U,{},"volumeSelector"),a.jsx(W,{},"bankSelector")]});return a.jsx(v,{store:S,children:a.jsx("section",{id:"drum-container",className:"container-fluid min-vh-100 vw-100 d-flex ",children:a.jsx("div",{id:"drum-machine",className:"container-fluid",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{id:"drum-header",className:"col-md-12",children:a.jsx("h1",{children:"M8 Drum Machine"})}),a.jsx("div",{id:"drum-pads",className:"col-md-6",children:a.jsx(G,{})}),a.jsx("div",{id:"drum-controls",className:"col-md-6",children:a.jsx(j,{controls:e})})]})})})})}function J(){return a.jsx(v,{store:S,children:a.jsx(L,{})})}export{J as default};
